"use strict";(self["webpackChunkforum_communautaire"]=self["webpackChunkforum_communautaire"]||[]).push([[900],{34(s,e,i){i.d(e,{A:()=>o});var t=i(144),n=i(768),a=i(51);const c=(s,e)=>{const i=(0,t.KR)(null),c=(0,t.KR)(null),o=(0,t.KR)(!1);let l=a.$_.collection(s);e&&(l=l.where(...e));const r=l.onSnapshot(s=>{let e=[];s.docs.forEach(s=>{s.data().createdAt&&e.push({...s.data(),id:s.id})}),i.value=e,c.value=null,o.value=!1},s=>{console.log(s.message),i.value=null,c.value="could not fetch the data",o.value=!1});return(0,n.nT)(s=>{s(()=>r())}),{error:c,documents:i,isPending:o}},o=c},820(s,e,i){i.d(e,{A:()=>_});var t=i(768),n=i(232);const a={class:"d-flex align-items-start"},c={class:"flex-grow-1"},o={class:"discussion-title"},l={class:"discussion-content"},r={class:"discussion-meta"},u={class:"meta-item"},d={class:"meta-item"},b={class:"meta-item"},g={class:"discussion-stats"},m={class:"stat-item"},k={class:"stat-item"};function p(s,e,i,p,v,f){const h=(0,t.g2)("b-col"),L=(0,t.g2)("b-badge"),_=(0,t.g2)("b-row"),y=(0,t.g2)("b-card");return(0,t.uX)(),(0,t.Wv)(y,{class:"discussion-card mb-3",onClick:p.goToDiscussion},{default:(0,t.k6)(()=>[(0,t.bF)(_,null,{default:(0,t.k6)(()=>[(0,t.bF)(h,{md:"9"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",a,[e[3]||(e[3]=(0,t.Lk)("div",{class:"user-avatar me-3"},[(0,t.Lk)("i",{class:"bi bi-person-circle"})],-1)),(0,t.Lk)("div",c,[(0,t.Lk)("h4",o,(0,n.v_)(i.discussion.title),1),(0,t.Lk)("p",l,(0,n.v_)(p.truncatedContent),1),(0,t.Lk)("div",r,[(0,t.Lk)("span",u,[e[0]||(e[0]=(0,t.Lk)("i",{class:"bi bi-person"},null,-1)),(0,t.eW)(" "+(0,n.v_)(i.discussion.authorName),1)]),(0,t.Lk)("span",d,[e[1]||(e[1]=(0,t.Lk)("i",{class:"bi bi-calendar"},null,-1)),(0,t.eW)(" "+(0,n.v_)(p.formatDate(i.discussion.createdAt)),1)]),(0,t.Lk)("span",b,[e[2]||(e[2]=(0,t.Lk)("i",{class:"bi bi-folder"},null,-1)),(0,t.eW)(" "+(0,n.v_)(p.getCategoryName(i.discussion.category)),1)])])])])]),_:1}),(0,t.bF)(h,{md:"3",class:"text-end"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",g,[(0,t.Lk)("div",m,[e[4]||(e[4]=(0,t.Lk)("i",{class:"bi bi-chat"},null,-1)),(0,t.Lk)("span",null,(0,n.v_)(i.discussion.replies||0),1),e[5]||(e[5]=(0,t.Lk)("small",null,"Réponses",-1))]),(0,t.Lk)("div",k,[e[6]||(e[6]=(0,t.Lk)("i",{class:"bi bi-eye"},null,-1)),(0,t.Lk)("span",null,(0,n.v_)(i.discussion.views||0),1),e[7]||(e[7]=(0,t.Lk)("small",null,"Vues",-1))]),i.discussion.reported?((0,t.uX)(),(0,t.Wv)(L,{key:0,variant:"danger",class:"mt-2"},{default:(0,t.k6)(()=>[...e[8]||(e[8]=[(0,t.Lk)("i",{class:"bi bi-exclamation-triangle"},null,-1),(0,t.eW)(" Signalé ",-1)])]),_:1})):(0,t.Q3)("",!0)])]),_:1})]),_:1})]),_:1},8,["onClick"])}var v=i(728);const f={name:"DiscussionCard",props:{discussion:{type:Object,required:!0}},setup(s){const e=(0,v.rd)(),i=(0,t.EW)(()=>{const e=150;return s.discussion.content.length>e?s.discussion.content.substring(0,e)+"...":s.discussion.content}),n=s=>{if(!s)return"";const e=s.toDate(),i=new Date,t=i-e,n=Math.floor(t/6e4),a=Math.floor(t/36e5),c=Math.floor(t/864e5);return n<1?"À l'instant":n<60?`Il y a ${n} min`:a<24?`Il y a ${a}h`:c<7?`Il y a ${c}j`:e.toLocaleDateString("fr-FR")},a=s=>{const e={general:"Général",tech:"Technologie",support:"Support",feedback:"Feedback",announcements:"Annonces",other:"Autres"};return e[s]||s},c=()=>{e.push({name:"Discussion",params:{id:s.discussion.id}})};return{truncatedContent:i,formatDate:n,getCategoryName:a,goToDiscussion:c}}};var h=i(241);const L=(0,h.A)(f,[["render",p],["__scopeId","data-v-5e1d5cbe"]]),_=L},900(s,e,i){i.r(e),i.d(e,{default:()=>f});var t=i(768),n=i(232);const a={class:"category-view"},c={class:"category-header mb-4"},o={class:"lead"},l={key:0,class:"text-center py-5"},r={key:1},u={key:2,class:"text-center py-5"};function d(s,e,i,d,b,g){const m=(0,t.g2)("DiscussionCard"),k=(0,t.g2)("b-button"),p=(0,t.g2)("b-col"),v=(0,t.g2)("b-list-group-item"),f=(0,t.g2)("b-list-group"),h=(0,t.g2)("b-card"),L=(0,t.g2)("b-row"),_=(0,t.g2)("b-container");return(0,t.uX)(),(0,t.CE)("div",a,[(0,t.bF)(_,null,{default:(0,t.k6)(()=>[(0,t.Lk)("div",c,[(0,t.Lk)("h1",null,[(0,t.Lk)("i",{class:(0,n.C4)(d.categoryIcon)},null,2),(0,t.eW)(" "+(0,n.v_)(d.categoryName),1)]),(0,t.Lk)("p",o,(0,n.v_)(d.categoryDescription),1)]),(0,t.bF)(L,null,{default:(0,t.k6)(()=>[(0,t.bF)(p,{md:"9"},{default:(0,t.k6)(()=>[d.isPending?((0,t.uX)(),(0,t.CE)("div",l,[...e[0]||(e[0]=[(0,t.Lk)("div",{class:"spinner"},null,-1),(0,t.Lk)("p",null,"Chargement des discussions...",-1)])])):d.filteredDiscussions&&d.filteredDiscussions.length?((0,t.uX)(),(0,t.CE)("div",r,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.filteredDiscussions,s=>((0,t.uX)(),(0,t.Wv)(m,{key:s.id,discussion:s},null,8,["discussion"]))),128))])):((0,t.uX)(),(0,t.CE)("div",u,[e[2]||(e[2]=(0,t.Lk)("i",{class:"bi bi-chat-text",style:{"font-size":"4rem",color:"#ccc"}},null,-1)),e[3]||(e[3]=(0,t.Lk)("h4",{class:"mt-3"},"Aucune discussion dans cette catégorie",-1)),(0,t.bF)(k,{variant:"primary",to:"/create-discussion"},{default:(0,t.k6)(()=>[...e[1]||(e[1]=[(0,t.eW)(" Créer la première discussion ",-1)])]),_:1})]))]),_:1}),(0,t.bF)(p,{md:"3"},{default:(0,t.k6)(()=>[(0,t.bF)(h,{title:"Catégories",class:"categories-sidebar"},{default:(0,t.k6)(()=>[(0,t.bF)(f,null,{default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.categories,s=>((0,t.uX)(),(0,t.Wv)(v,{key:s.id,to:`/category/${s.id}`,active:s.id===i.id,button:""},{default:(0,t.k6)(()=>[(0,t.Lk)("i",{class:(0,n.C4)(s.icon)},null,2),(0,t.eW)(" "+(0,n.v_)(s.name),1)]),_:2},1032,["to","active"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}var b=i(144),g=i(34),m=i(820);const k={name:"CategoryView",components:{DiscussionCard:m.A},props:["id"],setup(s){const{documents:e,error:i,isPending:n}=(0,g.A)("discussions"),a=(0,b.KR)([{id:"general",name:"Général",icon:"bi bi-chat-dots",description:"Discussions générales"},{id:"tech",name:"Technologie",icon:"bi bi-laptop",description:"Programmation, gadgets, etc."},{id:"support",name:"Support",icon:"bi bi-question-circle",description:"Questions et aide"},{id:"feedback",name:"Feedback",icon:"bi bi-star",description:"Suggestions et retours"},{id:"announcements",name:"Annonces",icon:"bi bi-megaphone",description:"Annonces importantes"},{id:"other",name:"Autres",icon:"bi bi-three-dots",description:"Autres sujets"}]),c=(0,t.EW)(()=>a.value.find(e=>e.id===s.id)||{}),o=(0,t.EW)(()=>c.value.name||"Catégorie"),l=(0,t.EW)(()=>c.value.icon||"bi bi-folder"),r=(0,t.EW)(()=>c.value.description||""),u=(0,t.EW)(()=>e.value?e.value.filter(e=>e.category===s.id):[]);return{discussions:e,error:i,isPending:n,categories:a,categoryName:o,categoryIcon:l,categoryDescription:r,filteredDiscussions:u}}};var p=i(241);const v=(0,p.A)(k,[["render",d],["__scopeId","data-v-193184c4"]]),f=v}}]);
//# sourceMappingURL=900.8a85a7da.js.map