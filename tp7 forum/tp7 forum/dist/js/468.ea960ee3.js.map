{"version":3,"file":"js/468.ea960ee3.js","mappings":"yKAGA,MAAMA,EAAgBA,CAACC,EAAYC,KACjC,MAAMC,GAAYC,EAAAA,EAAAA,IAAI,MAChBC,GAAQD,EAAAA,EAAAA,IAAI,MACZE,GAAYF,EAAAA,EAAAA,KAAI,GAGtB,IAAIG,EAAgBC,EAAAA,GAAiBP,WAAWA,GAE5CC,IACFK,EAAgBA,EAAcE,SAASP,IAGzC,MAAMQ,EAAQH,EAAcI,WAAWC,IACrC,IAAIC,EAAU,GACdD,EAAKE,KAAKC,QAAQC,IAEhBA,EAAIC,OAAOC,WAAaL,EAAQM,KAAK,IAAIH,EAAIC,OAAQG,GAAIJ,EAAII,OAI/DjB,EAAUkB,MAAQR,EAClBR,EAAMgB,MAAQ,KACdf,EAAUe,OAAQ,GACjBC,IACDC,QAAQC,IAAIF,EAAIG,SAChBtB,EAAUkB,MAAQ,KAClBhB,EAAMgB,MAAQ,2BACdf,EAAUe,OAAQ,IAOpB,OAJAK,EAAAA,EAAAA,IAAaC,IACXA,EAAa,IAAMjB,OAGd,CAAEL,QAAOF,YAAWG,cAG7B,G,mDCrCA,MAAMsB,EAAiBA,KACrB,MAAMvB,GAAQD,EAAAA,EAAAA,IAAI,MACZE,GAAYF,EAAAA,EAAAA,KAAI,GAGhByB,EAAmBC,UACvBzB,EAAMgB,MAAQ,KACdf,EAAUe,OAAQ,EAElB,IACE,MAAMU,QAAYvB,EAAAA,GAAiBP,WAAW,eAAe+B,IAAI,IAC5DC,EACHf,WAAWgB,EAAAA,EAAAA,MACXC,QAAS,EACTC,MAAO,EACPC,UAAU,EACVC,YAAa,IAGf,OADAhC,EAAUe,OAAQ,EACXU,CACT,CAAE,MAAOT,GACPC,QAAQlB,MAAMiB,EAAIG,SAClBpB,EAAMgB,MAAQ,8BACdf,EAAUe,OAAQ,CACpB,GAIIkB,EAAmBT,MAAOV,EAAIoB,KAClCnC,EAAMgB,MAAQ,KACdf,EAAUe,OAAQ,EAElB,UACQb,EAAAA,GAAiBP,WAAW,eAAee,IAAII,GAAIqB,OAAO,IAC3DD,EACHE,WAAWR,EAAAA,EAAAA,QAEb5B,EAAUe,OAAQ,CACpB,CAAE,MAAOC,GACPC,QAAQlB,MAAMiB,EAAIG,SAClBpB,EAAMgB,MAAQ,8BACdf,EAAUe,OAAQ,CACpB,GAIIsB,EAAmBb,UACvBzB,EAAMgB,MAAQ,KACdf,EAAUe,OAAQ,EAElB,UACQb,EAAAA,GAAiBP,WAAW,eAAee,IAAII,GAAIwB,SAEzD,MAAMC,QAAwBrC,EAAAA,GAC3BP,WAAW,WACXQ,MAAM,eAAgB,KAAMW,GAC5B0B,MAEGC,EAAQvC,EAAAA,GAAiBuC,QAC/BF,EAAgB/B,KAAKC,QAAQC,IAC3B+B,EAAMH,OAAO5B,EAAIZ,aAEb2C,EAAMC,SAEZ1C,EAAUe,OAAQ,CACpB,CAAE,MAAOC,GACPC,QAAQlB,MAAMiB,EAAIG,SAClBpB,EAAMgB,MAAQ,8BACdf,EAAUe,OAAQ,CACpB,GAII4B,EAAiBnB,UACrB,UACQtB,EAAAA,GAAiBP,WAAW,eAAee,IAAII,GAAIqB,OAAO,CAC9DL,MAAO5B,EAAAA,GAAiB0C,WAAWC,UAAU,IAEjD,CAAE,MAAO7B,GACPC,QAAQlB,MAAM,6BAA8BiB,EAAIG,QAClD,GAGF,MAAO,CACLpB,QACAC,YACAuB,mBACAU,mBACAI,mBACAM,mBAIJ,G,0EC/FOG,MAAM,c,SAcoCA,MAAM,e,mBA+CjCA,MAAM,oB,SASiBA,MAAM,e,mBA6C7BA,MAAM,oB,SASgBA,MAAM,e,2QA5HhDC,EAAAA,EAAAA,IAgLM,MAhLNC,EAgLM,EA/KJC,EAAAA,EAAAA,IA8KcC,EAAA,M,iBA7KZ,IAEK,C,eAFLC,EAAAA,EAAAA,IAEK,MAFDL,MAAM,QAAM,EACdK,EAAAA,EAAAA,IAAkC,KAA/BL,MAAM,wB,QAAyB,6B,KAGpCG,EAAAA,EAAAA,IAGUG,EAAA,CAHDC,QAAQ,OAAOC,KAAA,I,kBACtB,IAAiC,IAAAC,EAAA,KAAAA,EAAA,KAAjCJ,EAAAA,EAAAA,IAAiC,KAA9BL,MAAM,qBAAmB,U,QAAK,6GAEnC,O,OAEAG,EAAAA,EAAAA,IAmKSO,EAAA,CAnKD,gBAAc,QAAM,C,iBAE1B,IAqDQ,EArDRP,EAAAA,EAAAA,IAqDQQ,EAAA,CArDDC,MAAM,wBAAwBC,OAAA,I,kBACnC,IAGM,CAHKC,EAAAC,6B,WAAXd,EAAAA,EAAAA,IAGM,MAHNe,EAGM,IAAAP,EAAA,KAAAA,EAAA,KAFJJ,EAAAA,EAAAA,IAA2B,OAAtBL,MAAM,WAAS,UACpBK,EAAAA,EAAAA,IAAoB,SAAjB,iBAAa,QAGFS,EAAAG,qBAAuBH,EAAAG,oBAAoBC,S,WAA3DjB,EAAAA,EAAAA,IAwCM,MAAAkB,EAAA,EAvCJhB,EAAAA,EAAAA,IAsCUiB,EAAA,CArCPC,MAAOP,EAAAG,oBACPK,OAAQR,EAAAS,iBACTC,QAAA,GACAC,MAAA,GACAC,WAAA,I,CAEW,eAAWC,EAAAA,EAAAA,IAGN9D,GAHY,EAC1BsC,EAAAA,EAAAA,IAEcyB,EAAA,CAFAC,GAAE,eAAiBhE,EAAKiE,KAAK9D,M,kBACzC,IAAqB,E,iBAAlBH,EAAKiE,KAAKlB,OAAK,K,oBAIX,qBAAiBe,EAAAA,EAAAA,IAC0C9D,GADpC,EAChCsC,EAAAA,EAAAA,IAAoE4B,EAAA,CAA3DxB,QAAQ,UAAQ,C,iBAAC,IAAgC,E,iBAA7B1C,EAAKiE,KAAK5C,aAAe,GAAJ,K,aAGzC,mBAAeyC,EAAAA,EAAAA,IACa9D,GADP,E,iBAC3BiD,EAAAkB,WAAWnE,EAAKiE,KAAKhE,YAAS,KAGxB,iBAAa6D,EAAAA,EAAAA,IAQX9D,GARiB,EAC5BsC,EAAAA,EAAAA,IAOW8B,EAAA,CANT1B,QAAQ,UACR2B,KAAK,KACJC,QAAKC,GAAEtB,EAAAuB,mBAAmBxE,EAAKiE,KAAK9D,IACrCgC,MAAM,Q,kBAEN,IAA2B,IAAAS,EAAA,KAAAA,EAAA,KAA3BJ,EAAAA,EAAAA,IAA2B,KAAxBL,MAAM,eAAa,U,QAAK,eAC7B,O,qBACAG,EAAAA,EAAAA,IAMW8B,EAAA,CALT1B,QAAQ,SACR2B,KAAK,KACJC,QAAKC,GAAEtB,EAAAvB,iBAAiB1B,EAAKiE,KAAK9D,K,kBAEnC,IAA2B,IAAAyC,EAAA,KAAAA,EAAA,KAA3BJ,EAAAA,EAAAA,IAA2B,KAAxBL,MAAM,eAAa,U,QAAK,eAC7B,O,iEAKNC,EAAAA,EAAAA,IAIM,MAJNqC,EAIM,IAAA7B,EAAA,KAAAA,EAAA,KAHJJ,EAAAA,EAAAA,IAA2E,KAAxEL,MAAM,qBAAqBuC,MAAA,sC,UAC9BlC,EAAAA,EAAAA,IAAgD,MAA5CL,MAAM,QAAO,8BAA0B,IAC3CK,EAAAA,EAAAA,IAA4C,KAAzCL,MAAM,cAAa,sBAAkB,U,OAK5CG,EAAAA,EAAAA,IAmDQQ,EAAA,CAnDDC,MAAM,sBAAoB,C,iBAC/B,IAGM,CAHKE,EAAA0B,yB,WAAXvC,EAAAA,EAAAA,IAGM,MAHNwC,EAGM,IAAAhC,EAAA,KAAAA,EAAA,KAFJJ,EAAAA,EAAAA,IAA2B,OAAtBL,MAAM,WAAS,UACpBK,EAAAA,EAAAA,IAAoB,SAAjB,iBAAa,QAGFS,EAAA4B,iBAAmB5B,EAAA4B,gBAAgBxB,S,WAAnDjB,EAAAA,EAAAA,IAsCM,MAAA0C,EAAA,EArCJxC,EAAAA,EAAAA,IAoCUiB,EAAA,CAnCPC,MAAOP,EAAA4B,gBACPpB,OAAQR,EAAA8B,YACTpB,QAAA,GACAC,MAAA,GACAC,WAAA,I,CAEW,iBAAaC,EAAAA,EAAAA,IACgB9D,GADV,E,iBACzBiD,EAAA+B,SAAShF,EAAKiE,KAAKgB,QAAS,MAAF,KAGpB,qBAAiBnB,EAAAA,EAAAA,IAC0C9D,GADpC,EAChCsC,EAAAA,EAAAA,IAAoE4B,EAAA,CAA3DxB,QAAQ,UAAQ,C,iBAAC,IAAgC,E,iBAA7B1C,EAAKiE,KAAK5C,aAAe,GAAJ,K,aAGzC,mBAAeyC,EAAAA,EAAAA,IACa9D,GADP,E,iBAC3BiD,EAAAkB,WAAWnE,EAAKiE,KAAKhE,YAAS,KAGxB,iBAAa6D,EAAAA,EAAAA,IAQX9D,GARiB,EAC5BsC,EAAAA,EAAAA,IAOW8B,EAAA,CANT1B,QAAQ,UACR2B,KAAK,KACJC,QAAKC,GAAEtB,EAAAiC,cAAclF,EAAKiE,KAAK9D,IAChCgC,MAAM,Q,kBAEN,IAA2B,IAAAS,EAAA,KAAAA,EAAA,KAA3BJ,EAAAA,EAAAA,IAA2B,KAAxBL,MAAM,eAAa,U,QAAK,eAC7B,O,qBACAG,EAAAA,EAAAA,IAMW8B,EAAA,CALT1B,QAAQ,SACR2B,KAAK,KACJC,QAAKC,GAAEtB,EAAAkC,YAAYnF,EAAKiE,KAAK9D,GAAIH,EAAKiE,KAAKmB,e,kBAE5C,IAA2B,IAAAxC,EAAA,KAAAA,EAAA,KAA3BJ,EAAAA,EAAAA,IAA2B,KAAxBL,MAAM,eAAa,U,QAAK,eAC7B,O,iEAKNC,EAAAA,EAAAA,IAIM,MAJNiD,EAIM,IAAAzC,EAAA,KAAAA,EAAA,KAHJJ,EAAAA,EAAAA,IAA2E,KAAxEL,MAAM,qBAAqBuC,MAAA,sC,UAC9BlC,EAAAA,EAAAA,IAA6C,MAAzCL,MAAM,QAAO,2BAAuB,IACxCK,EAAAA,EAAAA,IAA4C,KAAzCL,MAAM,cAAa,sBAAkB,U,OAK5CG,EAAAA,EAAAA,IAkDQQ,EAAA,CAlDDC,MAAM,0BAAwB,C,iBACnC,IAGM,CAHKE,EAAAqC,wB,WAAXlD,EAAAA,EAAAA,IAGM,MAHNmD,EAGM,IAAA3C,EAAA,MAAAA,EAAA,MAFJJ,EAAAA,EAAAA,IAA2B,OAAtBL,MAAM,WAAS,UACpBK,EAAAA,EAAAA,IAAoB,SAAjB,iBAAa,QAGFS,EAAAuC,gBAAkBvC,EAAAuC,eAAenC,S,WAAjDjB,EAAAA,EAAAA,IA2CM,MAAAqD,EAAA,EA1CJnD,EAAAA,EAAAA,IAkCUiB,EAAA,CAjCPC,MAAOP,EAAAuC,eACP/B,OAAQR,EAAAyC,oBACT/B,QAAA,GACAC,MAAA,GACAC,WAAA,GACC,WAAU,GACV,eAAcZ,EAAA0C,a,CAEJ,eAAW7B,EAAAA,EAAAA,IAGN9D,GAHY,EAC1BsC,EAAAA,EAAAA,IAEcyB,EAAA,CAFAC,GAAE,eAAiBhE,EAAKiE,KAAK9D,M,kBACzC,IAAqB,E,iBAAlBH,EAAKiE,KAAKlB,OAAK,K,oBAIX,kBAAce,EAAAA,EAAAA,IAGb9D,GAHmB,EAC7BsC,EAAAA,EAAAA,IAEU4B,EAAA,CAFAxB,QAAS1C,EAAKiE,KAAK7C,SAAW,SAAW,W,kBACjD,IAAwC,E,iBAArCpB,EAAKiE,KAAK7C,SAAW,MAAQ,OAAX,K,yBAId,mBAAe0C,EAAAA,EAAAA,IACa9D,GADP,E,iBAC3BiD,EAAAkB,WAAWnE,EAAKiE,KAAKhE,YAAS,KAGxB,iBAAa6D,EAAAA,EAAAA,IAOX9D,GAPiB,EAC5BsC,EAAAA,EAAAA,IAMW8B,EAAA,CALT1B,QAAQ,SACR2B,KAAK,KACJC,QAAKC,GAAEtB,EAAAvB,iBAAiB1B,EAAKiE,KAAK9D,K,kBAEnC,IAA2B,IAAAyC,EAAA,MAAAA,EAAA,MAA3BJ,EAAAA,EAAAA,IAA2B,KAAxBL,MAAM,eAAa,U,QAAK,eAC7B,O,iEAIJG,EAAAA,EAAAA,IAKgBsD,EAAA,C,WAJL3C,EAAA0C,Y,qCAAA1C,EAAA0C,YAAWpB,GACnB,aAAYtB,EAAAuC,eAAenC,OAC3B,WAAU,GACXwC,MAAM,U,iIAgBpB,SACEC,KAAM,aACNC,KAAAA,GACE,MAAM,gBAAEC,IAAoBC,EAAAA,EAAAA,MACpBvE,iBAAkBwE,IAA2BvF,EAAAA,EAAAA,MAC7CwE,YAAagB,IAAsBC,EAAAA,EAAAA,MAEnClH,UAAWkE,EAAqB/D,UAAW6D,IAA+BnE,EAAAA,EAAAA,GAChF,cACA,CAAC,WAAY,MAAM,KAGbG,UAAW2F,EAAiBxF,UAAWsF,IAA2B5F,EAAAA,EAAAA,GACxE,UACA,CAAC,WAAY,MAAM,KAGbG,UAAWsG,EAAgBnG,UAAWiG,IAA0BvG,EAAAA,EAAAA,GAAc,eAEhF4G,GAAcxG,EAAAA,EAAAA,IAAI,GAElBuE,EAAmB,CACvB,CAAE2C,IAAK,QAASC,MAAO,SACvB,CAAED,IAAK,aAAcC,MAAO,UAC5B,CAAED,IAAK,cAAeC,MAAO,gBAC7B,CAAED,IAAK,YAAaC,MAAO,QAC3B,CAAED,IAAK,UAAWC,MAAO,YAGrBvB,EAAc,CAClB,CAAEsB,IAAK,UAAWC,MAAO,WACzB,CAAED,IAAK,aAAcC,MAAO,UAC5B,CAAED,IAAK,cAAeC,MAAO,gBAC7B,CAAED,IAAK,YAAaC,MAAO,QAC3B,CAAED,IAAK,UAAWC,MAAO,YAGrBZ,EAAsB,CAC1B,CAAEW,IAAK,QAASC,MAAO,SACvB,CAAED,IAAK,aAAcC,MAAO,UAC5B,CAAED,IAAK,WAAYC,MAAO,aAC1B,CAAED,IAAK,WAAYC,MAAO,WAC1B,CAAED,IAAK,YAAaC,MAAO,QAC3B,CAAED,IAAK,UAAWC,MAAO,YAGrBnC,EAAclD,GACbA,EACEA,EAAUsF,SAASC,mBAAmB,SADtB,GAInBxB,EAAWA,CAACyB,EAAMpD,IAClBoD,EAAKpD,OAASA,EACToD,EAAKC,UAAU,EAAGrD,GAAU,MAE9BoD,EAGHjC,EAAqB3D,UACrB8F,QAAQ,sCACJX,EAAgB,cAAe7F,IAInC+E,EAAgBrE,UAChB8F,QAAQ,mCACJX,EAAgB,UAAW7F,IAI/BuB,EAAmBb,UACnB8F,QAAQ,qDACJT,EAAuB/F,IAI3BgF,EAActE,MAAOV,EAAIiF,KACzBuB,QAAQ,kDACJR,EAAkBhG,EAAIiF,IAIhC,MAAO,CACLhC,sBACAF,6BACA2B,kBACAF,yBACAa,iBACAF,wBACAK,cACAjC,mBACAqB,cACAW,sBACAvB,aACAa,WACAR,qBACAU,gBACAxD,mBACAyD,cAEJ,G,aCxRF,MAAMyB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,G,mDCNA,MAAMT,EAAaA,KACjB,MAAMhH,GAAQD,EAAAA,EAAAA,IAAI,MACZE,GAAYF,EAAAA,EAAAA,KAAI,GAGhB2H,EAAcjG,UAClBzB,EAAMgB,MAAQ,KACdf,EAAUe,OAAQ,EAElB,IACE,MAAMU,QAAYvB,EAAAA,GAAiBP,WAAW,WAAW+B,IAAI,IACxDgG,EACH9G,WAAWgB,EAAAA,EAAAA,MACXG,UAAU,EACVC,YAAa,IAaf,aATM9B,EAAAA,GACHP,WAAW,eACXe,IAAIgH,EAAM3B,cACV5D,OAAO,CACNN,QAAS3B,EAAAA,GAAiB0C,WAAWC,UAAU,GAC/C8E,aAAa/F,EAAAA,EAAAA,QAGjB5B,EAAUe,OAAQ,EACXU,CACT,CAAE,MAAOT,GACPC,QAAQlB,MAAMiB,EAAIG,SAClBpB,EAAMgB,MAAQ,yBACdf,EAAUe,OAAQ,CACpB,GAII6G,EAAcpG,MAAOV,EAAIoB,KAC7BnC,EAAMgB,MAAQ,KACdf,EAAUe,OAAQ,EAElB,UACQb,EAAAA,GAAiBP,WAAW,WAAWe,IAAII,GAAIqB,OAAO,IACvDD,EACHE,WAAWR,EAAAA,EAAAA,QAEb5B,EAAUe,OAAQ,CACpB,CAAE,MAAOC,GACPC,QAAQlB,MAAMiB,EAAIG,SAClBpB,EAAMgB,MAAQ,yBACdf,EAAUe,OAAQ,CACpB,GAII+E,EAActE,MAAOV,EAAIiF,KAC7BhG,EAAMgB,MAAQ,KACdf,EAAUe,OAAQ,EAElB,UACQb,EAAAA,GAAiBP,WAAW,WAAWe,IAAII,GAAIwB,eAG/CpC,EAAAA,GACHP,WAAW,eACXe,IAAIqF,GACJ5D,OAAO,CACNN,QAAS3B,EAAAA,GAAiB0C,WAAWC,WAAW,KAGpD7C,EAAUe,OAAQ,CACpB,CAAE,MAAOC,GACPC,QAAQlB,MAAMiB,EAAIG,SAClBpB,EAAMgB,MAAQ,yBACdf,EAAUe,OAAQ,CACpB,GAGF,MAAO,CACLhB,QACAC,YACAyH,cACAG,cACA9B,gBAIJ,G,mDCtFA,MAAMc,EAAgBA,KACpB,MAAM7G,GAAQD,EAAAA,EAAAA,IAAI,MACZE,GAAYF,EAAAA,EAAAA,KAAI,GAGhB+H,EAAgBrG,MAAO7B,EAAYmB,KACvCf,EAAMgB,MAAQ,KACdf,EAAUe,OAAQ,EAElB,UACQb,EAAAA,GAAiBP,WAAWA,GAAYe,IAAII,GAAIqB,OAAO,CAC3DJ,UAAU,EACVC,YAAa9B,EAAAA,GAAiB0C,WAAWC,UAAU,KAErD7C,EAAUe,OAAQ,CACpB,CAAE,MAAOC,GACPC,QAAQlB,MAAMiB,EAAIG,SAClBpB,EAAMgB,MAAQ,2BACdf,EAAUe,OAAQ,CACpB,GAII4F,EAAkBnF,MAAO7B,EAAYmB,KACzCf,EAAMgB,MAAQ,KACdf,EAAUe,OAAQ,EAElB,UACQb,EAAAA,GAAiBP,WAAWA,GAAYe,IAAII,GAAIqB,OAAO,CAC3DJ,UAAU,EACVC,YAAa,IAEfhC,EAAUe,OAAQ,CACpB,CAAE,MAAOC,GACPC,QAAQlB,MAAMiB,EAAIG,SAClBpB,EAAMgB,MAAQ,6BACdf,EAAUe,OAAQ,CACpB,GAII+G,EAAgBtG,MAAO7B,EAAYmB,KACvCf,EAAMgB,MAAQ,KACdf,EAAUe,OAAQ,EAElB,UACQb,EAAAA,GAAiBP,WAAWA,GAAYe,IAAII,GAAIwB,SACtDtC,EAAUe,OAAQ,CACpB,CAAE,MAAOC,GACPC,QAAQlB,MAAMiB,EAAIG,SAClBpB,EAAMgB,MAAQ,2BACdf,EAAUe,OAAQ,CACpB,GAGF,MAAO,CACLhB,QACAC,YACA6H,gBACAlB,kBACAmB,kBAIJ,G","sources":["webpack://forum-communautaire/./src/composables/getCollection.js","webpack://forum-communautaire/./src/composables/useDiscussions.js","webpack://forum-communautaire/./src/views/Moderation.vue","webpack://forum-communautaire/./src/views/Moderation.vue?7809","webpack://forum-communautaire/./src/composables/useReplies.js","webpack://forum-communautaire/./src/composables/useModeration.js"],"sourcesContent":["import { ref, watchEffect } from 'vue'\nimport { projectFirestore } from '../firebase/config'\n\nconst getCollection = (collection, query) => {\n  const documents = ref(null)\n  const error = ref(null)\n  const isPending = ref(false)\n\n  // register the firestore collection reference\n  let collectionRef = projectFirestore.collection(collection)\n  \n  if (query) {\n    collectionRef = collectionRef.where(...query)\n  }\n\n  const unsub = collectionRef.onSnapshot(snap => {\n    let results = []\n    snap.docs.forEach(doc => {\n      // must wait for the server to create the timestamp & send it back\n      doc.data().createdAt && results.push({...doc.data(), id: doc.id})\n    })\n    \n    // update values\n    documents.value = results\n    error.value = null\n    isPending.value = false\n  }, err => {\n    console.log(err.message)\n    documents.value = null\n    error.value = 'could not fetch the data'\n    isPending.value = false\n  })\n\n  watchEffect((onInvalidate) => {\n    onInvalidate(() => unsub())\n  })\n\n  return { error, documents, isPending }\n}\n\nexport default getCollection\n","import { ref } from 'vue'\nimport { projectFirestore, timestamp } from '../firebase/config'\n\nconst useDiscussions = () => {\n  const error = ref(null)\n  const isPending = ref(false)\n\n  // Create a new discussion\n  const createDiscussion = async (discussion) => {\n    error.value = null\n    isPending.value = true\n    \n    try {\n      const res = await projectFirestore.collection('discussions').add({\n        ...discussion,\n        createdAt: timestamp(),\n        replies: 0,\n        views: 0,\n        reported: false,\n        reportCount: 0\n      })\n      isPending.value = false\n      return res\n    } catch (err) {\n      console.error(err.message)\n      error.value = 'Could not create discussion'\n      isPending.value = false\n    }\n  }\n\n  // Update a discussion\n  const updateDiscussion = async (id, updates) => {\n    error.value = null\n    isPending.value = true\n    \n    try {\n      await projectFirestore.collection('discussions').doc(id).update({\n        ...updates,\n        updatedAt: timestamp()\n      })\n      isPending.value = false\n    } catch (err) {\n      console.error(err.message)\n      error.value = 'Could not update discussion'\n      isPending.value = false\n    }\n  }\n\n  // Delete a discussion\n  const deleteDiscussion = async (id) => {\n    error.value = null\n    isPending.value = true\n    \n    try {\n      await projectFirestore.collection('discussions').doc(id).delete()\n      // Also delete all replies\n      const repliesSnapshot = await projectFirestore\n        .collection('replies')\n        .where('discussionId', '==', id)\n        .get()\n      \n      const batch = projectFirestore.batch()\n      repliesSnapshot.docs.forEach(doc => {\n        batch.delete(doc.ref)\n      })\n      await batch.commit()\n      \n      isPending.value = false\n    } catch (err) {\n      console.error(err.message)\n      error.value = 'Could not delete discussion'\n      isPending.value = false\n    }\n  }\n\n  // Increment view count\n  const incrementViews = async (id) => {\n    try {\n      await projectFirestore.collection('discussions').doc(id).update({\n        views: projectFirestore.FieldValue.increment(1)\n      })\n    } catch (err) {\n      console.error('Could not increment views:', err.message)\n    }\n  }\n\n  return { \n    error, \n    isPending, \n    createDiscussion, \n    updateDiscussion, \n    deleteDiscussion,\n    incrementViews\n  }\n}\n\nexport default useDiscussions\n","<template>\n  <div class=\"moderation\">\n    <b-container>\n      <h1 class=\"mb-4\">\n        <i class=\"bi bi-shield-check\"></i> Panneau de Modération\n      </h1>\n\n      <b-alert variant=\"info\" show>\n        <i class=\"bi bi-info-circle\"></i>\n        En tant que modérateur, vous pouvez gérer les contenus signalés et supprimer les messages inappropriés.\n      </b-alert>\n\n      <b-tabs content-class=\"mt-4\">\n        <!-- Reported Discussions -->\n        <b-tab title=\"Discussions Signalées\" active>\n          <div v-if=\"reportedDiscussionsLoading\" class=\"text-center\">\n            <div class=\"spinner\"></div>\n            <p>Chargement...</p>\n          </div>\n\n          <div v-else-if=\"reportedDiscussions && reportedDiscussions.length\">\n            <b-table \n              :items=\"reportedDiscussions\" \n              :fields=\"discussionFields\"\n              striped \n              hover\n              responsive\n            >\n              <template #cell(title)=\"data\">\n                <router-link :to=\"`/discussion/${data.item.id}`\">\n                  {{ data.item.title }}\n                </router-link>\n              </template>\n\n              <template #cell(reportCount)=\"data\">\n                <b-badge variant=\"danger\">{{ data.item.reportCount || 1 }}</b-badge>\n              </template>\n\n              <template #cell(createdAt)=\"data\">\n                {{ formatDate(data.item.createdAt) }}\n              </template>\n\n              <template #cell(actions)=\"data\">\n                <b-button \n                  variant=\"success\" \n                  size=\"sm\"\n                  @click=\"unreportDiscussion(data.item.id)\"\n                  class=\"me-2\"\n                >\n                  <i class=\"bi bi-check\"></i> Approuver\n                </b-button>\n                <b-button \n                  variant=\"danger\" \n                  size=\"sm\"\n                  @click=\"deleteDiscussion(data.item.id)\"\n                >\n                  <i class=\"bi bi-trash\"></i> Supprimer\n                </b-button>\n              </template>\n            </b-table>\n          </div>\n\n          <div v-else class=\"text-center py-5\">\n            <i class=\"bi bi-check-circle\" style=\"font-size: 4rem; color: #4caf50;\"></i>\n            <h4 class=\"mt-3\">Aucune discussion signalée</h4>\n            <p class=\"text-muted\">Tout est en ordre!</p>\n          </div>\n        </b-tab>\n\n        <!-- Reported Replies -->\n        <b-tab title=\"Réponses Signalées\">\n          <div v-if=\"reportedRepliesLoading\" class=\"text-center\">\n            <div class=\"spinner\"></div>\n            <p>Chargement...</p>\n          </div>\n\n          <div v-else-if=\"reportedReplies && reportedReplies.length\">\n            <b-table \n              :items=\"reportedReplies\" \n              :fields=\"replyFields\"\n              striped \n              hover\n              responsive\n            >\n              <template #cell(content)=\"data\">\n                {{ truncate(data.item.content, 100) }}\n              </template>\n\n              <template #cell(reportCount)=\"data\">\n                <b-badge variant=\"danger\">{{ data.item.reportCount || 1 }}</b-badge>\n              </template>\n\n              <template #cell(createdAt)=\"data\">\n                {{ formatDate(data.item.createdAt) }}\n              </template>\n\n              <template #cell(actions)=\"data\">\n                <b-button \n                  variant=\"success\" \n                  size=\"sm\"\n                  @click=\"unreportReply(data.item.id)\"\n                  class=\"me-2\"\n                >\n                  <i class=\"bi bi-check\"></i> Approuver\n                </b-button>\n                <b-button \n                  variant=\"danger\" \n                  size=\"sm\"\n                  @click=\"deleteReply(data.item.id, data.item.discussionId)\"\n                >\n                  <i class=\"bi bi-trash\"></i> Supprimer\n                </b-button>\n              </template>\n            </b-table>\n          </div>\n\n          <div v-else class=\"text-center py-5\">\n            <i class=\"bi bi-check-circle\" style=\"font-size: 4rem; color: #4caf50;\"></i>\n            <h4 class=\"mt-3\">Aucune réponse signalée</h4>\n            <p class=\"text-muted\">Tout est en ordre!</p>\n          </div>\n        </b-tab>\n\n        <!-- All Content -->\n        <b-tab title=\"Toutes les Discussions\">\n          <div v-if=\"allDiscussionsLoading\" class=\"text-center\">\n            <div class=\"spinner\"></div>\n            <p>Chargement...</p>\n          </div>\n\n          <div v-else-if=\"allDiscussions && allDiscussions.length\">\n            <b-table \n              :items=\"allDiscussions\" \n              :fields=\"allDiscussionFields\"\n              striped \n              hover\n              responsive\n              :per-page=\"10\"\n              :current-page=\"currentPage\"\n            >\n              <template #cell(title)=\"data\">\n                <router-link :to=\"`/discussion/${data.item.id}`\">\n                  {{ data.item.title }}\n                </router-link>\n              </template>\n\n              <template #cell(reported)=\"data\">\n                <b-badge :variant=\"data.item.reported ? 'danger' : 'success'\">\n                  {{ data.item.reported ? 'Oui' : 'Non' }}\n                </b-badge>\n              </template>\n\n              <template #cell(createdAt)=\"data\">\n                {{ formatDate(data.item.createdAt) }}\n              </template>\n\n              <template #cell(actions)=\"data\">\n                <b-button \n                  variant=\"danger\" \n                  size=\"sm\"\n                  @click=\"deleteDiscussion(data.item.id)\"\n                >\n                  <i class=\"bi bi-trash\"></i> Supprimer\n                </b-button>\n              </template>\n            </b-table>\n\n            <b-pagination\n              v-model=\"currentPage\"\n              :total-rows=\"allDiscussions.length\"\n              :per-page=\"10\"\n              align=\"center\"\n            ></b-pagination>\n          </div>\n        </b-tab>\n      </b-tabs>\n    </b-container>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport getCollection from '../composables/getCollection'\nimport useModeration from '../composables/useModeration'\nimport useDiscussions from '../composables/useDiscussions'\nimport useReplies from '../composables/useReplies'\n\nexport default {\n  name: 'Moderation',\n  setup() {\n    const { unreportContent } = useModeration()\n    const { deleteDiscussion: deleteDiscussionAction } = useDiscussions()\n    const { deleteReply: deleteReplyAction } = useReplies()\n\n    const { documents: reportedDiscussions, isPending: reportedDiscussionsLoading } = getCollection(\n      'discussions',\n      ['reported', '==', true]\n    )\n\n    const { documents: reportedReplies, isPending: reportedRepliesLoading } = getCollection(\n      'replies',\n      ['reported', '==', true]\n    )\n\n    const { documents: allDiscussions, isPending: allDiscussionsLoading } = getCollection('discussions')\n\n    const currentPage = ref(1)\n\n    const discussionFields = [\n      { key: 'title', label: 'Titre' },\n      { key: 'authorName', label: 'Auteur' },\n      { key: 'reportCount', label: 'Signalements' },\n      { key: 'createdAt', label: 'Date' },\n      { key: 'actions', label: 'Actions' }\n    ]\n\n    const replyFields = [\n      { key: 'content', label: 'Contenu' },\n      { key: 'authorName', label: 'Auteur' },\n      { key: 'reportCount', label: 'Signalements' },\n      { key: 'createdAt', label: 'Date' },\n      { key: 'actions', label: 'Actions' }\n    ]\n\n    const allDiscussionFields = [\n      { key: 'title', label: 'Titre' },\n      { key: 'authorName', label: 'Auteur' },\n      { key: 'category', label: 'Catégorie' },\n      { key: 'reported', label: 'Signalé' },\n      { key: 'createdAt', label: 'Date' },\n      { key: 'actions', label: 'Actions' }\n    ]\n\n    const formatDate = (timestamp) => {\n      if (!timestamp) return ''\n      return timestamp.toDate().toLocaleDateString('fr-FR')\n    }\n\n    const truncate = (text, length) => {\n      if (text.length > length) {\n        return text.substring(0, length) + '...'\n      }\n      return text\n    }\n\n    const unreportDiscussion = async (id) => {\n      if (confirm('Approuver cette discussion?')) {\n        await unreportContent('discussions', id)\n      }\n    }\n\n    const unreportReply = async (id) => {\n      if (confirm('Approuver cette réponse?')) {\n        await unreportContent('replies', id)\n      }\n    }\n\n    const deleteDiscussion = async (id) => {\n      if (confirm('Supprimer définitivement cette discussion?')) {\n        await deleteDiscussionAction(id)\n      }\n    }\n\n    const deleteReply = async (id, discussionId) => {\n      if (confirm('Supprimer définitivement cette réponse?')) {\n        await deleteReplyAction(id, discussionId)\n      }\n    }\n\n    return {\n      reportedDiscussions,\n      reportedDiscussionsLoading,\n      reportedReplies,\n      reportedRepliesLoading,\n      allDiscussions,\n      allDiscussionsLoading,\n      currentPage,\n      discussionFields,\n      replyFields,\n      allDiscussionFields,\n      formatDate,\n      truncate,\n      unreportDiscussion,\n      unreportReply,\n      deleteDiscussion,\n      deleteReply\n    }\n  }\n}\n</script>\n\n<style scoped>\n.moderation {\n  padding: 40px 0;\n}\n\n.moderation h1 {\n  color: #667eea;\n}\n\n.table {\n  background: white;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n}\n</style>\n","import { render } from \"./Moderation.vue?vue&type=template&id=19f80d2e&scoped=true\"\nimport script from \"./Moderation.vue?vue&type=script&lang=js\"\nexport * from \"./Moderation.vue?vue&type=script&lang=js\"\n\nimport \"./Moderation.vue?vue&type=style&index=0&id=19f80d2e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-19f80d2e\"]])\n\nexport default __exports__","import { ref } from 'vue'\nimport { projectFirestore, timestamp } from '../firebase/config'\n\nconst useReplies = () => {\n  const error = ref(null)\n  const isPending = ref(false)\n\n  // Create a reply\n  const createReply = async (reply) => {\n    error.value = null\n    isPending.value = true\n    \n    try {\n      const res = await projectFirestore.collection('replies').add({\n        ...reply,\n        createdAt: timestamp(),\n        reported: false,\n        reportCount: 0\n      })\n      \n      // Increment reply count on discussion\n      await projectFirestore\n        .collection('discussions')\n        .doc(reply.discussionId)\n        .update({\n          replies: projectFirestore.FieldValue.increment(1),\n          lastReplyAt: timestamp()\n        })\n      \n      isPending.value = false\n      return res\n    } catch (err) {\n      console.error(err.message)\n      error.value = 'Could not create reply'\n      isPending.value = false\n    }\n  }\n\n  // Update a reply\n  const updateReply = async (id, updates) => {\n    error.value = null\n    isPending.value = true\n    \n    try {\n      await projectFirestore.collection('replies').doc(id).update({\n        ...updates,\n        updatedAt: timestamp()\n      })\n      isPending.value = false\n    } catch (err) {\n      console.error(err.message)\n      error.value = 'Could not update reply'\n      isPending.value = false\n    }\n  }\n\n  // Delete a reply\n  const deleteReply = async (id, discussionId) => {\n    error.value = null\n    isPending.value = true\n    \n    try {\n      await projectFirestore.collection('replies').doc(id).delete()\n      \n      // Decrement reply count on discussion\n      await projectFirestore\n        .collection('discussions')\n        .doc(discussionId)\n        .update({\n          replies: projectFirestore.FieldValue.increment(-1)\n        })\n      \n      isPending.value = false\n    } catch (err) {\n      console.error(err.message)\n      error.value = 'Could not delete reply'\n      isPending.value = false\n    }\n  }\n\n  return { \n    error, \n    isPending, \n    createReply, \n    updateReply, \n    deleteReply \n  }\n}\n\nexport default useReplies\n","import { ref } from 'vue'\nimport { projectFirestore } from '../firebase/config'\n\nconst useModeration = () => {\n  const error = ref(null)\n  const isPending = ref(false)\n\n  // Report a discussion or reply\n  const reportContent = async (collection, id) => {\n    error.value = null\n    isPending.value = true\n    \n    try {\n      await projectFirestore.collection(collection).doc(id).update({\n        reported: true,\n        reportCount: projectFirestore.FieldValue.increment(1)\n      })\n      isPending.value = false\n    } catch (err) {\n      console.error(err.message)\n      error.value = 'Could not report content'\n      isPending.value = false\n    }\n  }\n\n  // Unreport content (moderator action)\n  const unreportContent = async (collection, id) => {\n    error.value = null\n    isPending.value = true\n    \n    try {\n      await projectFirestore.collection(collection).doc(id).update({\n        reported: false,\n        reportCount: 0\n      })\n      isPending.value = false\n    } catch (err) {\n      console.error(err.message)\n      error.value = 'Could not unreport content'\n      isPending.value = false\n    }\n  }\n\n  // Delete content (moderator action)\n  const deleteContent = async (collection, id) => {\n    error.value = null\n    isPending.value = true\n    \n    try {\n      await projectFirestore.collection(collection).doc(id).delete()\n      isPending.value = false\n    } catch (err) {\n      console.error(err.message)\n      error.value = 'Could not delete content'\n      isPending.value = false\n    }\n  }\n\n  return { \n    error, \n    isPending, \n    reportContent, \n    unreportContent,\n    deleteContent\n  }\n}\n\nexport default useModeration\n"],"names":["getCollection","collection","query","documents","ref","error","isPending","collectionRef","projectFirestore","where","unsub","onSnapshot","snap","results","docs","forEach","doc","data","createdAt","push","id","value","err","console","log","message","watchEffect","onInvalidate","useDiscussions","createDiscussion","async","res","add","discussion","timestamp","replies","views","reported","reportCount","updateDiscussion","updates","update","updatedAt","deleteDiscussion","delete","repliesSnapshot","get","batch","commit","incrementViews","FieldValue","increment","class","_createElementBlock","_hoisted_1","_createVNode","_component_b_container","_createElementVNode","_component_b_alert","variant","show","_cache","_component_b_tabs","_component_b_tab","title","active","$setup","reportedDiscussionsLoading","_hoisted_2","reportedDiscussions","length","_hoisted_3","_component_b_table","items","fields","discussionFields","striped","hover","responsive","_withCtx","_component_router_link","to","item","_component_b_badge","formatDate","_component_b_button","size","onClick","$event","unreportDiscussion","_hoisted_4","style","reportedRepliesLoading","_hoisted_5","reportedReplies","_hoisted_6","replyFields","truncate","content","unreportReply","deleteReply","discussionId","_hoisted_7","allDiscussionsLoading","_hoisted_8","allDiscussions","_hoisted_9","allDiscussionFields","currentPage","_component_b_pagination","align","name","setup","unreportContent","useModeration","deleteDiscussionAction","deleteReplyAction","useReplies","key","label","toDate","toLocaleDateString","text","substring","confirm","__exports__","render","createReply","reply","lastReplyAt","updateReply","reportContent","deleteContent"],"ignoreList":[],"sourceRoot":""}